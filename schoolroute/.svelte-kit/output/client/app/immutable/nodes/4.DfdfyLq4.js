const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/CpOGMVz4.js","../chunks/CqkleIqs.js","../assets/leaflet.CIGW-MKW.css","../chunks/DEO1QmyJ.js"])))=>i.map(i=>d[i]);
import"../chunks/DsnmJJEf.js";import{p as P,ax as O,s as w,k as N,n as A,b as p,c as j,aC as C,f as g,h as b,d as v,i as c,g as h,t as D,j as L,aD as B,aE as q,o as V,aF as H,m as J}from"../chunks/h7MUBmDw.js";import{i as E}from"../chunks/CfDQ-aYo.js";import{s as K,p as Q,l as U,w as W,g as X}from"../chunks/DTRYEj25.js";import{_ as T}from"../chunks/D9Z9MdNV.js";import{p as M}from"../chunks/r0bgQIrM.js";import{i as Y}from"../chunks/BPwULdUY.js";import{e as Z,b as $,i as ee}from"../chunks/DNQEJwGN.js";import{r as te}from"../chunks/DvPZ1a-0.js";var oe=g("<p> </p>"),ae=g('<div class="skeleton h-4 w-3/5"></div> <div class="skeleton h-4 w-full"></div> <div class="skeleton h-4 w-5/6"></div>',1),se=g('<h1 class="font-semibold text-[18px] pb-2">Route: <span class="text-[#237CC9]"> </span></h1> <h2 class="font-semibold text-[18px] pb-6">School: <span class="text-[#237CC9]"> </span></h2> <section class="mt-5 flex flex-col gap-6"><!></section>',1),le=g('<li>A <span class="font-bold">school</span></li>'),re=g('<li>A <span class="font-bold">route</span> on the map</li>'),ne=g('<div class="p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 rounded"><h2 class="font-semibold text-lg mb-2">Please select:</h2> <ul class="list-disc ml-6"><!> <!></ul></div>');function ie(S,a){P(a,!0);let r=C(""),n=0;O(async()=>{if(a.selectedRoute&&a.selectedSchool){w(r,"");const e=++n,o=await K(a.selectedSchool,a.selectedRoute);e===n&&w(r,o,!0)}});var m=N(),d=A(m);{var i=e=>{var o=se(),s=A(o),t=b(v(s)),_=v(t,!0);c(t),c(s);var u=b(s,2),y=b(v(u)),l=v(y,!0);c(y),c(u);var x=b(u,2),I=v(x);{var z=R=>{var k=oe(),G=v(k,!0);c(k),D(()=>L(G,h(r))),p(R,k)},F=R=>{var k=ae();B(4),p(R,k)};E(I,R=>{h(r)?R(z):R(F,!1)})}c(x),D(()=>{L(_,a.selectedRoute.long_name),L(l,a.selectedSchool.name)}),p(e,o)},f=e=>{var o=ne(),s=b(v(o),2),t=v(s);{var _=l=>{var x=le();p(l,x)};E(t,l=>{a.selectedSchool||l(_)})}var u=b(t,2);{var y=l=>{var x=re();p(l,x)};E(u,l=>{a.selectedRoute||l(y)})}c(s),c(o),p(e,o)};E(d,e=>{a.selectedRoute&&a.selectedSchool?e(i):e(f,!1)})}p(S,m),j()}var ce=g('<div id="map" class="card bg-base-100 h-[80vh] m-4 md:m-8 p-6 md:p-15 shadow-sm drop-shadow-2xl"></div>');function de(S,a){P(a,!0);const r=q();let n,m,d=M(a,"selectedSchool",7),i;O(()=>{if(d()&&n){const e=n.find(o=>o.name==d().name);e&&i.setView([e.geo_point.lat,e.geo_point.lon],17)}}),V(async()=>{const e=(await T(async()=>{const{default:t}=await import("../chunks/CpOGMVz4.js").then(_=>_.l);return{default:t}},__vite__mapDeps([0,1]),import.meta.url)).default;await T(()=>Promise.resolve({}),__vite__mapDeps([2]),import.meta.url),await T(()=>import("../chunks/DEO1QmyJ.js").then(t=>t.l),__vite__mapDeps([3,1]),import.meta.url),i=e.map("map").setView([-35.2,149.1],12),e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(i),m=Q(await U("/routes.csv")),n=await(await fetch("/schools.json")).json();const s=e.markerClusterGroup();n.forEach(t=>{const _=e.marker([t.geo_point.lat,t.geo_point.lon]).on("click",u=>{d(t),r("schoolSelected",t)}).bindPopup(t.name);s.addLayer(_)}),i.addLayer(s),m.forEach(t=>{W(t.the_geom).forEach(u=>{e.polyline(u,{color:X(),weight:5}).on("click",y=>{r("routeSelected",t)}).addTo(i).bindPopup(t.long_name)})})});var f=ce();p(S,f),j()}var ve=g("<option></option>"),me=g('<input type="text" class="input" placeholder="Select a school" list="schools"/> <datalist id="schools"></datalist>',1);function ue(S,a){P(a,!1);const r=q();let n=M(a,"value",12,""),m=J([]);V(async()=>{const o=await(await fetch("/schools.json")).json(),s=new Set;o.forEach(t=>{s.add(t.name)}),w(m,Array.from(s).sort())}),Y();var d=me(),i=A(d);te(i);var f=b(i,2);Z(f,5,()=>h(m),ee,(e,o)=>{var s=ve(),t={};D(()=>{t!==(t=h(o))&&(s.value=(s.__value=h(o))??"")}),p(e,s)}),c(f),$(i,n),H("input",i,e=>r("input",e.target.value)),p(S,d),j()}var pe=g('<div class="flex flex-col md:flex-row w-full"><section class="md:w-1/3 h-76"><div class="mb-10 shadow-sm drop-shadow-2xl m-4 md:m-8 p-6 md:p-10 card bg-base-100"><h1 class="font-semibold text-2xl pb-6">Public Transport Services</h1> <h2 class="pb-3">Search Schools</h2> <!></div> <div class="mb-10 shadow-sm drop-shadow-2xl m-4 md:m-8 p-6 md:p-10 card bg-base-100"><!></div></section> <section class="md:w-2/3 md:mt-0 mt-32 w-1xl"><!></section></div>');function Re(S,a){P(a,!0);let r=C(void 0),n=C(void 0),m=[],d=C("");V(async()=>{m=await(await fetch("/schools.json")).json()});function i(l){w(d,l.detail,!0);const x=m.find(I=>I.name===h(d));x&&(w(n,void 0),w(r,x,!0))}var f=pe(),e=v(f),o=v(e),s=b(v(o),4);ue(s,{get value(){return h(d)},$$events:{input:i}}),c(o);var t=b(o,2),_=v(t);ie(_,{get selectedRoute(){return h(n)},get selectedSchool(){return h(r)}}),c(t),c(e);var u=b(e,2),y=v(u);de(y,{get selectedSchool(){return h(r)},$$events:{schoolSelected:l=>{w(n,void 0),w(r,l.detail,!0),w(d,h(r).name,!0)},routeSelected:l=>w(n,l.detail,!0)}}),c(u),c(f),p(S,f),j()}export{Re as component};
